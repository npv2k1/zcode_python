palidrome_2_3 = [0, 1, 6643, 1422773, 5415589, 90396755477,
                 381920985378904469, 1922624336133018996235,
                 2004595370006815987563563,
                 8022581057533823761829436662099,
                 392629621582222667733213907054116073,
                 32456836304775204439912231201966254787,
                 428027336071597254024922793107218595973]


a, b, m = list(map(int, input().split()))
c = 0
if m==2:
    for i in range(a,b+1):
        bin_i = bin(i)[2:]
        if(bin_i == bin_i[::-1]):
            c+=1
    print(c)
if(m==3):
    for i in palidrome_2_3:
        if i<=b and i>=a:
            c+=1       
    print(c)
if (m>3):
    if(a>1):
        print(0)
    else:
        print(2)
# print(fromDeci(12, 123456))
